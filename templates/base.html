<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Maihlili SPV</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    .icon-container svg {
        width: 1.5rem; /* 24px */
        height: 1.5rem; /* 24px */
        stroke-width: 2; /* Épaisseur par défaut de Heroicons */
        color: white;
    }
    .liquid-glass-selected .icon-container svg {
        color: #3055ff; /* Couleur bleue pour l'icône sélectionnée */
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // Couleurs exactes du logo Maihlili (bleu pur)
            'maihlili': {
              50: '#EEF2FF',
              100: '#E0E7FF', 
              200: '#C7D2FE',
              300: '#A5B4FC',
              400: '#818CF8',
              500: '#4F46E5', // Bleu exact de votre logo
              600: '#4338CA', 
              700: '#3730A3',
              800: '#312E81',
              900: '#1E1B4B'
            },
            'nouveau-bleu': {
                50: '#E6E9FF',
                100: '#C8CEFF',
                200: '#AAAEFF',
                300: '#8C8FFF',
                400: '#6E71FF',
                500: '#3055ff', // Le nouveau bleu
                600: '#2A4CE5',
                700: '#2343CC',
                800: '#1D3AAA',
                900: '#163188'
            },
            // NOUVELLES COULEURS POUR LE STYLE FIGMA
            'maihlili-figma-blue': { // Couleur principale de la sidebar (bleu uni)
                DEFAULT: '#3055ff', // Utilisation de votre 'nouveau-bleu-500'
            },
            'maihlili-figma-rose': { // Couleur pour l'élément sélectionné
                DEFAULT: '#FFDCE4', // Simule le rose des maquettes
                dark: '#E0E7FF', // Une couleur claire pour le dark mode si nécessaire
            },
          }
        }
      }
    }
  </script>
  <style>
    /* -------------------------------------------------------------------------------------------------- */
    /* Couleurs & Thème Maihlili SPV                                                                       */
    /* -------------------------------------------------------------------------------------------------- */
    :root {
      /* Couleurs Claires */
      --color-bg-light: #fff0f8; /* FOND GENERAL EN #fff0f8 */
      --color-text-light: #1f2937;
      --color-text-subtle-light: #6b7280;
      --color-border-light: #e5e7eb;
      --color-card-bg-light: #fff0f8;
    }

    [data-theme="dark"] {
      /* Couleurs Sombres pour le tableau de bord uniquement */
      --color-bg-dark-dashboard: #1f2937;
      --color-text-dark-dashboard: #f9fafb;
      --color-text-subtle-dark-dashboard: #9ca3af;
      --color-border-dark-dashboard: #374151;
      --color-card-bg-dark-dashboard: #2d3748;
      
      /* Couleurs pour la sidebar en mode sombre (bleu) */
      --color-bg-dark-sidebar: #3055ff;
      --color-text-dark-sidebar: #f9fafb;
      --color-text-subtle-dark-sidebar: #c7d2fe;
      --color-border-dark-sidebar: rgba(255, 255, 255, 0.1);
      --color-card-bg-dark-sidebar: #2a4ce5;
    }

    body {
      background-color: var(--color-bg-light);
      color: var(--color-text-light);
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    
    .card {
      background-color: var(--color-card-bg-light);
      border: 1px solid var(--color-border-light);
      transition: background-color 0.5s ease, border-color 0.5s ease;
    }

    /* Styles pour la zone de contenu principale en mode sombre */
    [data-theme="dark"] main {
        background-color: var(--color-bg-dark-dashboard);
        color: var(--color-text-dark-dashboard);
    }
    
    /* Correction pour les cartes et éléments 'bg-white' dans le dashboard */
    [data-theme="dark"] main .bg-white {
        background-color: var(--color-card-bg-dark-dashboard);
        border-color: var(--color-border-dark-dashboard);
    }
    
    /* Styles pour la sidebar en mode sombre (maintenue pour la neutralisation) */
    [data-theme="dark"] aside {
        background: var(--color-bg-dark-sidebar);
        color: var(--color-text-dark-sidebar);
        border-color: var(--color-border-dark-sidebar);
    }
    
    [data-theme="dark"] aside .card {
        background: var(--color-card-bg-dark-sidebar);
        border: 1px solid var(--color-border-dark-sidebar);
    }

    /* Couleurs du texte dans le contenu principal */
    [data-theme="dark"] main .text-gray-800 { color: var(--color-text-dark-dashboard); }
    [data-theme="dark"] main .text-gray-500 { color: var(--color-text-subtle-dark-dashboard); }
    [data-theme="dark"] main .border-gray-200 { border-color: var(--color-border-dark-dashboard); }
    
    /* Couleurs du texte dans la sidebar */
    [data-theme="dark"] aside .text-gray-800 { color: var(--color-text-dark-sidebar); }
    [data-theme="dark"] aside .text-gray-500 { color: var(--color-text-subtle-dark-sidebar); }
    [data-theme="dark"] aside .border-gray-200 { border-color: var(--color-border-dark-sidebar); }

    /* -------------------------------------------------------------------------------------------------- */
    /* AMÉLIORATIONS MODE SOMBRE - LISIBILITÉ ACCRUE                                                      */
    /* -------------------------------------------------------------------------------------------------- */
    
    /* Couleurs pour les textes en mode sombre */
    [data-theme="dark"] main .text-gray-700 { color: #E5E7EB !important; }
    [data-theme="dark"] main .text-gray-600 { color: #D1D5DB !important; }
    [data-theme="dark"] main .text-gray-400 { color: #6B7280 !important; }
    
    /* Améliorations des bordures */
    [data-theme="dark"] main .border-gray-300 { border-color: #6B7280 !important; }
    
    /* Dividers plus visibles */
    [data-theme="dark"] main .divide-gray-200 > * + * { border-color: #4B5563 !important; }
    
    /* Tables plus lisibles */
    [data-theme="dark"] main .bg-gray-50 { 
        background-color: #374151 !important;
        color: #F3F4F6 !important;
    }
    
    [data-theme="dark"] main .hover\:bg-gray-50:hover { 
        background-color: #4B5563 !important; 
    }
    
    /* Cartes et conteneurs */
    [data-theme="dark"] main .shadow-sm { 
        box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3) !important; 
    }
    
    [data-theme="dark"] main .shadow-lg { 
        box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2) !important; 
    }
    
    /* Inputs et selects plus lisibles */
    [data-theme="dark"] main input, 
    [data-theme="dark"] main select, 
    [data-theme="dark"] main textarea {
        background-color: #374151 !important;
        border-color: #6B7280 !important;
        color: #F3F4F6 !important;
    }
    
    [data-theme="dark"] main input::placeholder,
    [data-theme="dark"] main textarea::placeholder {
        color: #9CA3AF !important;
    }
    
    [data-theme="dark"] main input:focus,
    [data-theme="dark"] main select:focus,
    [data-theme="dark"] main textarea:focus {
        border-color: #4F46E5 !important;
        box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.3) !important;
        background-color: #4B5563 !important;
    }
    
    /* Modals en mode sombre */
    [data-theme="dark"] .fixed.bg-black.bg-opacity-50 {
        background-color: rgba(0, 0, 0, 0.8) !important;
    }
    
    [data-theme="dark"] .fixed .bg-white {
        background-color: #1F2937 !important;
        border: 1px solid #374151 !important;
    }
    
    /* Badges et statuts plus contrastés */
    [data-theme="dark"] main .bg-green-100 {
        background-color: #065F46 !important;
        color: #A7F3D0 !important;
    }
    
    [data-theme="dark"] main .bg-blue-100 {
        background-color: #1E3A8A !important;
        color: #BFDBFE !important;
    }
    
    [data-theme="dark"] main .bg-purple-100 {
        background-color: #581C87 !important;
        color: #DDD6FE !important;
    }
    
    [data-theme="dark"] main .bg-yellow-100 {
        background-color: #92400E !important;
        color: #FED7AA !important;
    }
    
    [data-theme="dark"] main .bg-red-100 {
        background-color: #7F1D1D !important;
        color: #FECACA !important;
    }
    
    /* Amélioration du contraste des couleurs de texte pour les badges */
    [data-theme="dark"] main .text-green-800 { color: #A7F3D0 !important; }
    [data-theme="dark"] main .text-blue-800 { color: #BFDBFE !important; }
    [data-theme="dark"] main .text-purple-800 { color: #DDD6FE !important; }
    [data-theme="dark"] main .text-yellow-800 { color: #FED7AA !important; }
    [data-theme="dark"] main .text-red-800 { color: #FECACA !important; }
    
    /* Boutons hover améliorés */
    [data-theme="dark"] main .hover\:bg-blue-50:hover { 
        background-color: rgba(79, 70, 229, 0.2) !important; 
    }
    
    [data-theme="dark"] main .hover\:bg-green-50:hover { 
        background-color: rgba(34, 197, 94, 0.2) !important; 
    }
    
    [data-theme="dark"] main .hover\:bg-red-50:hover { 
        background-color: rgba(239, 68, 68, 0.2) !important; 
    }
    
    [data-theme="dark"] main .hover\:bg-gray-200:hover { 
        background-color: #6B7280 !important; 
    }
    
    /* Stats cards plus lisibles */
    [data-theme="dark"] main .text-blue-600 { color: #60A5FA !important; }
    [data-theme="dark"] main .text-green-600 { color: #34D399 !important; }
    [data-theme="dark"] main .text-purple-600 { color: #A78BFA !important; }
    [data-theme="dark"] main .text-orange-600 { color: #FB923C !important; }
    [data-theme="dark"] main .text-red-600 { color: #F87171 !important; }

    /* -------------------------------------------------------------------------------------------------- */
    /* NOUVEAUX STYLES FIGMA / LIQUID GLASS                                                               */
    /* -------------------------------------------------------------------------------------------------- */
    
    /* Force la police pour les éléments de la nouvelle sidebar */
    .font-['Bebas_Neue'] {
        font-family: 'Bebas Neue', cursive;
    }

    /* Style par défaut des liens (Liquid Glass) */
    .liquid-glass-default {
        background-color: rgba(255, 255, 255, 0.3); /* Blanc transparent */
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(5px); /* Flou (support navigateur variable, nécessite un prefixe ou un plugin tailwind) */
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.5); /* Bordure légère */
    }

    /* Style de l'élément sélectionné (Liquid Glass Rose) */
    .liquid-glass-selected {
        /* Utilisation de la couleur rose définie dans tailwind.config */
        background-color: #FFDCE4; /* maihlili-figma-rose */
        color: #3055ff !important; /* Texte en bleu Maihlili */
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid #FFDCE4;
    }
    
    /* Le style par défaut de l'ancienne sidebar doit être neutralisé pour la nouvelle */
    [data-theme="dark"] aside {
        background: #3055ff !important; /* Force le bleu même en mode sombre */
        color: white !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3) !important;
    }
    
    /* -------------------------------------------------------------------------------------------------- */
    /* Logos                                                                                              */
    /* -------------------------------------------------------------------------------------------------- */
    .logo-dark { display: none; }
    .logo-light { display: inline-block; }
    [data-theme="dark"] .logo-light { display: none; }
    [data-theme="dark"] .logo-dark { display: inline-block; }

    /* -------------------------------------------------------------------------------------------------- */
    /* Animations & Scrollbar                                                                             */
    /* -------------------------------------------------------------------------------------------------- */
    * { transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease, transform 0.2s ease !important; }
    
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: rgba(79, 70, 229, 0.1); border-radius: 10px; }
    ::-webkit-scrollbar-thumb { background: linear-gradient(180deg, #4F46E5 0%, #4338CA 100%); border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: linear-gradient(180deg, #4338CA 0%, #3730A3 100%); }
    
    /* Scrollbars pour le mode sombre */
    [data-theme="dark"] ::-webkit-scrollbar-track { 
        background: #1F2937 !important; 
    }
    
    [data-theme="dark"] ::-webkit-scrollbar-thumb { 
        background: linear-gradient(180deg, #4F46E5 0%, #7C3AED 100%) !important; 
    }
    
    [data-theme="dark"] ::-webkit-scrollbar-thumb:hover { 
        background: linear-gradient(180deg, #4338CA 0%, #6D28D9 100%) !important; 
    }
    
    /* Style du bouton de thème */
    .theme-toggle {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: #f8fafc;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 32px rgba(79, 70, 229, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      font-size: 1.5rem;
    }

    /* Toggle theme button amélioré */
    [data-theme="dark"] .theme-toggle {
        background: linear-gradient(135deg, #4F46E5, #7C3AED) !important;
        border: none !important;
        box-shadow: 0 8px 32px rgba(79, 70, 229, 0.4) !important;
        color: #E0E7FF;
    }
    
    [data-theme="dark"] .theme-toggle:hover {
        transform: translateY(-2px) !important;
        box-shadow: 0 12px 40px rgba(79, 70, 229, 0.5) !important;
    }

    /* Sidebar améliorée */
    /* Les styles Figma ci-dessus prennent le dessus sur ces anciennes classes de sidebar */
    [data-theme="dark"] aside {
        background: #3055ff !important; /* Force le bleu même en mode sombre */
        color: white !important;
        border-color: rgba(255, 255, 255, 0.1) !important;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3) !important;
    }
    
    [data-theme="dark"] aside .nav-link {
        color: #E0E7FF !important;
        transition: all 0.2s ease !important;
    }
    
    [data-theme="dark"] aside .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.1) !important;
        color: #FFFFFF !important;
        transform: translateX(4px) !important;
    }
    
    /* User profile dans la sidebar */
    [data-theme="dark"] aside .user-profile {
        background-color: rgba(255, 255, 255, 0.1) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
    }
    
    /* Flash messages améliorés */
    [data-theme="dark"] .bg-gradient-to-r.from-maihlili-100.to-maihlili-50 {
        background: linear-gradient(to right, rgba(79, 70, 229, 0.2), rgba(99, 102, 241, 0.1)) !important;
        border-color: rgba(79, 70, 229, 0.3) !important;
        color: #E0E7FF !important;
    }

    /* Couleurs du menu en mode sombre */
    [data-theme="dark"] .nav-link {
        color: var(--color-text-subtle-dark-sidebar);
    }
    [data-theme="dark"] .nav-link:hover {
        background-color: var(--color-card-bg-dark-sidebar);
        color: var(--color-text-dark-sidebar);
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.7/main.min.css" rel="stylesheet">
</head>
<body class="bg-[#fff0f8] flex min-h-screen" data-theme="light"> 

  <aside class="w-[320px] p-3 flex flex-col bg-[#fff0f8]" style="min-height: 100vh;">
    <div class="h-[140px] rounded-[30px] bg-maihlili-figma-blue flex items-center p-4 shadow-xl">
      <div class="w-[110px] h-[110px] rounded-full bg-white flex items-center justify-center -translate-y-1 shadow-xl">
        <img src="{{ url_for('static', filename='images/maihlili-logo-light.png') }}" alt="Logo Maihlili clair" class="h-24 w-24 rounded-full">
      </div>
      <div class="ml-3 flex flex-col leading-none text-white font-['Bebas_Neue'] uppercase">
        <span class="text-3xl tracking-widest -mb-1">Maihlili.</span>
        <span class="text-3xl tracking-widest">Paie</span>
      </div>
    </div>

    <div class="flex-1 mt-3 p-4 rounded-[30px] bg-maihlili-figma-blue flex flex-col justify-between shadow-2xl">
      
      <nav class="space-y-2">
        {% if current_user.is_authenticated %}
          {% set menu_items = [
            # NOUVEAU: Utilisation d'icônes Heroicons au lieu des emojis
            ('PresentationChartBarIcon', 'Planning', url_for('index') if current_user.is_manager else url_for('employee_dashboard'), current_user.is_authenticated),
            ('CalendarDaysIcon', 'Planning Avancé', url_for('planning'), current_user.is_manager),
            ('UsersIcon', 'Employés', url_for('show_employees'), current_user.is_manager),
            ('BuildingOfficeIcon', 'Équipes', url_for('manage_teams'), current_user.is_manager),
            ('ClockIcon', 'Services', url_for('show_shifts'), current_user.is_manager),
            ('ClipboardDocumentListIcon', 'Assignations', url_for('assignments'), current_user.is_manager),
            ('Cog6ToothIcon', 'Paramètres', url_for('settings'), current_user.is_authenticated)
          ] %}

          {% for icon_name, label, url, condition in menu_items %}
            {% if condition %}
            <a href="{{ url }}" 
               class="nav-link flex items-center p-2 rounded-[15px] hover:bg-white/20 transition-all duration-200 shadow-md
                      {% if loop.index == 1 %} liquid-glass-selected {% else %} liquid-glass-default {% endif %}"
               style="height: 50px; gap: 0.5rem;"> 
              
              <span class="icon-container p-1 bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                  {% if icon_name == 'PresentationChartBarIcon' %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h2.25M3.75 3h16.5M3.75 3l4.72.633a9 9 0 0 1 4.244 4.244L20.25 3M16.5 7.5h.008v.008H16.5v-.008ZM12.75 16.5h.008v.008H12.75V16.5Z" />
                    </svg>
                  {% elif icon_name == 'CalendarDaysIcon' %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
                    </svg>
                  {% elif icon_name == 'UsersIcon' %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
                    </svg>
                  {% elif icon_name == 'BuildingOfficeIcon' %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="m3.75 21 9-9m0 0 9-9m-9 9h.008v.008H12v-.008Z" />
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 18V9M4.5 9h15m-7.5 0V3.75m0 0L14.25 6M9.75 6 12 3.75" />
                    </svg>
                  {% elif icon_name == 'ClockIcon' %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                  {% elif icon_name == 'ClipboardDocumentListIcon' %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v2.75m15 0a2.25 2.25 0 0 1-2.25 2.25H4.5M21 16.5a2.25 2.25 0 0 1-2.25 2.25H5.25a2.25 2.25 0 0 1-2.25-2.25V5.25a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v11.25ZM12 9.75h.008v.008H12V9.75Zm0 2.25h.008v.008H12v-.008Zm0 2.25h.008v.008H12v-.008Z" />
                    </svg>
                  {% elif icon_name == 'Cog6ToothIcon' %}
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.75c.57.198 1.144.376 1.725.534.148.455.27.917.37 1.39a1.69 1.69 0 0 0 2.373 1.968l1.724.086c.653.033 1.25.32 1.765.751A5.992 5.992 0 0 1 21 12c0 1.287-.367 2.483-1.002 3.535a2.766 2.766 0 0 1-1.765.75l-1.724.085a1.69 1.69 0 0 0-2.373 1.968c-.1-.473-.223-.935-.371-1.39-.581.158-1.155.336-1.724.534a1.69 1.69 0 0 0-1.968 2.373c.085 1.723.336 3.42.751 5.066h.086a9 9 0 0 0 3.535-1.002 2.766 2.766 0 0 1 .75-1.765l.085-1.724a1.69 1.69 0 0 0 1.968-2.373c.473-.1.935-.223 1.39-.371.158-.581.336-1.155.534-1.724a1.69 1.69 0 0 0 2.373-1.968c-.033-1.723-.32-3.42-.751-5.066h-.086a9 9 0 0 0-3.535 1.002 2.766 2.766 0 0 1-1.765.75l-.085 1.724a1.69 1.69 0 0 0-1.968 2.373c-.1.473-.223.935-.371 1.39-.581.158-1.155.336-1.724.534a1.69 1.69 0 0 0-2.373-1.968c-.653-.033-1.25-.32-1.765-.751A5.992 5.992 0 0 1 3 12c0-1.287.367-2.483 1.002-3.535a2.766 2.766 0 0 1 1.765-.75l1.724-.085a1.69 1.69 0 0 0 2.373-1.968c.1-.473.223-.935.371-1.39-.581-.158-1.155-.336-1.724-.534a1.69 1.69 0 0 0-1.968-2.373Z" />
                    </svg>
                  {% endif %}
              </span>
              <span class="text-lg text-white font-medium ml-2">{{ label }}</span> 
            </a>
            {% endif %}
          {% endfor %}
        
        {% else %}
          <a href="{{ url_for('login') }}" 
             class="nav-link flex items-center p-2 rounded-[15px] liquid-glass-default hover:bg-white/20"
             style="height: 50px; gap: 0.5rem;">
            <span class="icon-container p-1 bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 0 1 3 3v8.25a3 3 0 0 1-3 3H7.5a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25ZM9.75 10.5h4.5M9.75 13.5h4.5M9.75 16.5h4.5" />
                </svg>
            </span>
            <span class="text-lg text-white font-medium ml-2">Connexion</span>
          </a>
          <a href="{{ url_for('register') }}" 
             class="nav-link flex items-center p-2 rounded-[15px] liquid-glass-default hover:bg-white/20"
             style="height: 50px; gap: 0.5rem;">
            <span class="icon-container p-1 bg-white/20 rounded-full w-8 h-8 flex items-center justify-center">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 18.07a4.5 4.5 0 0 1-1.897 1.13L6 20l.859-2.288a4.5 4.5 0 0 1 1.13-1.897l8.283-8.281zM18 10.5l1.5 1.5M12.75 9h-4.5" />
                </svg>
            </span>
            <span class="text-lg text-white font-medium ml-2">Inscription</span>
          </a>
        {% endif %}
      </nav>
      
      <div class="mt-4 space-y-2"> 
        
        {% if current_user.is_authenticated %}
        <div class="flex items-center p-3 rounded-[30px] bg-white/30 backdrop-blur-sm shadow-inner" style="height: 65px;"> 
          <div class="w-10 h-10 bg-white/50 rounded-full flex items-center justify-center text-white text-xl font-bold shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
              <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 4.743A9.522 9.522 0 0 0 12 3.5c-4.972 0-9 4.028-9 9s4.028 9 9 9 9-4.028 9-9c0-.448-.046-.889-.138-1.32" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.406 20.088c-1.691-.715-3.593-1.088-5.406-1.088-1.813 0-3.715.373-5.406 1.088a1.5 1.5 0 0 0-.844 1.341c0 .828.672 1.5 1.5 1.5h9.75a1.5 1.5 0 0 0 1.5-1.5 1.5 1.5 0 0 0-.844-1.341Z" />
            </svg>
          </div>
          <div class="flex-1 ml-3 text-white">
            <p class="text-xl font-['Bebas_Neue'] uppercase tracking-wider">{{ current_user.username }}</p> 
            <p class="text-xs font-light -mt-1">
              {% if current_user.is_admin %}Administrateur
              {% elif current_user.is_manager %}Manager
              {% else %}Employé{% endif %}
            </p>
          </div>
        </div>
        
        <a href="{{ url_for('logout') }}" 
           class="flex items-center justify-center p-3 rounded-[30px] bg-red-400/70 hover:bg-red-500/80 backdrop-blur-sm text-white font-['Bebas_Neue'] uppercase text-xl transition-all duration-200"
           style="height: 45px;"> 
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 mr-2 -translate-y-0.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6A2.25 2.25 0 0 0 5.25 5.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l3 3m0 0-3 3m3-3H6" />
          </svg>
          Se Déconnecter
        </a>
        {% endif %}
      </div>
    </div>
  </aside>

  <main class="flex-1 p-6">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="mb-4">
          {% for msg in messages %}
            <li class="bg-gradient-to-r from-maihlili-100 to-maihlili-50 border border-maihlili-200 text-maihlili-700 px-4 py-3 rounded-lg mb-2 shadow-sm">
              <span class="font-medium">ℹ️</span> {{ msg }}
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </main>

  <button class="theme-toggle" id="themeToggle">
    🌙
  </button>

  <script>
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    
    // Récupérer le thème sauvegardé
    const savedTheme = localStorage.getItem('maihlili-theme') || 'light';
    body.setAttribute('data-theme', savedTheme);
    updateThemeToggle(savedTheme);
    
    function toggleTheme() {
      const currentTheme = body.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('maihlili-theme', newTheme);
      updateThemeToggle(newTheme);
    }
    
    function updateThemeToggle(theme) {
      if (theme === 'light') {
        themeToggle.textContent = '🌙';
        themeToggle.title = 'Passer en mode sombre';
      } else {
        themeToggle.textContent = '☀️';
        themeToggle.title = 'Passer en mode clair';
      }
    }

    themeToggle.addEventListener('click', toggleTheme);

    document.addEventListener('DOMContentLoaded', function() {
      const currentPath = window.location.pathname;
      const navLinks = document.querySelectorAll('.nav-link');
      
      navLinks.forEach(link => {
        // Logique pour mettre en surbrillance le lien actif dans la nouvelle structure
        // Réinitialise d'abord les classes par défaut
        link.classList.remove('liquid-glass-selected');
        link.classList.add('liquid-glass-default');
        
        // Applique la classe sélectionnée si le chemin correspond
        if (link.getAttribute('href') === currentPath) {
          link.classList.add('liquid-glass-selected');
          link.classList.remove('liquid-glass-default');
        }
      });
    });
  </script>
</body>
</html>
