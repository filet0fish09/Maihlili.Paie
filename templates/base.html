<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Maihlili Paie</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // Couleurs exactes du logo Maihlili (bleu pur)
            'maihlili': {
              50: '#EEF2FF',
              100: '#E0E7FF', 
              200: '#C7D2FE',
              300: '#A5B4FC',
              400: '#818CF8',
              500: '#4F46E5', // Bleu exact de votre logo
              600: '#4338CA', 
              700: '#3730A3',
              800: '#312E81',
              900: '#1E1B4B'
            },
            'nouveau-bleu': {
                50: '#E6E9FF',
                100: '#C8CEFF',
                200: '#AAAEFF',
                300: '#8C8FFF',
                400: '#6E71FF',
                500: '#3055ff', // Le nouveau bleu
                600: '#2A4CE5',
                700: '#2343CC',
                800: '#1D3AAA',
                900: '#163188'
            }
          }
        }
      }
    }
  </script>
  <style>
    /* -------------------------------------------------------------------------------------------------- */
    /* Couleurs & ThÃ¨me Maihlili Paie AMÃ‰LIORÃ‰ Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â */
    /* -------------------------------------------------------------------------------------------------- */
    :root {
      /* Couleurs Claires */
      --color-bg-light: #f9fafb;
      --color-text-light: #1f2937;
      --color-text-subtle-light: #6b7280;
      --color-border-light: #e5e7eb;
      --color-card-bg-light: #ffffff;
    }

    [data-theme="dark"] {
      /* NOUVEAU GRADIENT INSPIRÃ‰ DE force_password_change */
      --gradient-hero: linear-gradient(135deg, #4F46E5 0%, #EC4899 100%);
      --gradient-primary: linear-gradient(135deg, #4F46E5 0%, #6366F1 100%);
      
      /* Couleurs Sombres pour le tableau de bord */
      --color-bg-dark-dashboard: #1f2937;
      --color-text-dark-dashboard: #f9fafb;
      --color-text-subtle-dark-dashboard: #9ca3af;
      --color-border-dark-dashboard: #374151;
      --color-card-bg-dark-dashboard: #2d3748;
      
      /* Couleurs pour la sidebar en mode sombre (GRADIENT) */
      --color-bg-dark-sidebar: linear-gradient(135deg, #4F46E5 0%, #7C3AED 100%);
      --color-text-dark-sidebar: #f9fafb;
      --color-text-subtle-dark-sidebar: #E0E7FF;
      --color-border-dark-sidebar: rgba(255, 255, 255, 0.1);
      --color-card-bg-dark-sidebar: rgba(255, 255, 255, 0.1);
    }

    body {
      background-color: var(--color-bg-light);
      color: var(--color-text-light);
      transition: background-color 0.5s ease, color 0.5s ease;
    }

    /* Mode sombre avec GRADIENT de fond */
    [data-theme="dark"] body {
      background: linear-gradient(135deg, #1f2937 0%, #111827 50%, #0f172a 100%);
      background-attachment: fixed;
    }

    .card {
      background-color: var(--color-card-bg-light);
      border: 1px solid var(--color-border-light);
      transition: background-color 0.5s ease, border-color 0.5s ease;
    }

    /* Styles pour la zone de contenu principale en mode sombre */
    [data-theme="dark"] main {
      background: transparent;
      color: var(--color-text-dark-dashboard);
    }

    /* Correction pour les cartes et Ã©lÃ©ments 'bg-white' dans le dashboard */
    [data-theme="dark"] main .bg-white {
      background: linear-gradient(135deg, rgba(45, 55, 72, 0.95) 0%, rgba(31, 41, 55, 0.95) 100%);
      border-color: var(--color-border-dark-dashboard);
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(79, 70, 229, 0.2);
    }

    /* Styles pour la sidebar en mode sombre avec GRADIENT */
    [data-theme="dark"] aside {
      background: var(--color-bg-dark-sidebar);
      color: var(--color-text-dark-sidebar);
      border-color: var(--color-border-dark-sidebar);
      box-shadow: 4px 0 24px rgba(79, 70, 229, 0.3);
    }

    [data-theme="dark"] aside .card {
      background: var(--color-card-bg-dark-sidebar);
      border: 1px solid var(--color-border-dark-sidebar);
      backdrop-filter: blur(10px);
    }

    /* Couleurs du texte dans le contenu principal */
    [data-theme="dark"] main .text-gray-800 { color: #F3F4F6 !important; }
    [data-theme="dark"] main .text-gray-500 { color: var(--color-text-subtle-dark-dashboard); }
    [data-theme="dark"] main .border-gray-200 { border-color: rgba(255, 255, 255, 0.1); }

    /* Couleurs du texte dans la sidebar */
    [data-theme="dark"] aside .text-gray-800 { color: var(--color-text-dark-sidebar); }
    [data-theme="dark"] aside .text-gray-500 { color: var(--color-text-subtle-dark-sidebar); }

    /* -------------------------------------------------------------------------------------------------- */
    /* AMÃ‰LIORATIONS MODE SOMBRE - LISIBILITÃ‰ ACCRUE Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  */
    /* -------------------------------------------------------------------------------------------------- */

    /* Couleurs pour les textes en mode sombre */
    [data-theme="dark"] main .text-gray-700 { color: #E5E7EB !important; }
    [data-theme="dark"] main .text-gray-600 { color: #D1D5DB !important; }
    [data-theme="dark"] main .text-gray-400 { color: #9CA3AF !important; }

    /* AmÃ©liorations des bordures */
    [data-theme="dark"] main .border-gray-300 { border-color: rgba(255, 255, 255, 0.15) !important; }

    /* Dividers plus visibles */
    [data-theme="dark"] main .divide-gray-200 > * + * { border-color: rgba(255, 255, 255, 0.1) !important; }

    /* Tables plus lisibles */
    [data-theme="dark"] main .bg-gray-50 {Â 
      background: linear-gradient(135deg, rgba(75, 85, 99, 0.5) 0%, rgba(55, 65, 81, 0.5) 100%) !important;
      color: #F3F4F6 !important;
      backdrop-filter: blur(10px);
    }

    [data-theme="dark"] main .hover\:bg-gray-50:hover {Â 
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.2) 0%, rgba(124, 58, 237, 0.2) 100%) !important;
    }

    /* Cartes et conteneurs avec effet glassmorphism */
    [data-theme="dark"] main .shadow-sm {Â 
      box-shadow: 0 1px 3px 0 rgba(79, 70, 229, 0.3), 0 0 20px rgba(124, 58, 237, 0.1) !important;Â 
    }

    [data-theme="dark"] main .shadow-lg {Â 
      box-shadow: 0 10px 25px rgba(79, 70, 229, 0.4), 0 0 40px rgba(124, 58, 237, 0.2) !important;Â 
    }

    /* Inputs et selects plus lisibles */
    [data-theme="dark"] main input,Â 
    [data-theme="dark"] main select,Â 
    [data-theme="dark"] main textarea {
      background: linear-gradient(135deg, rgba(55, 65, 81, 0.8) 0%, rgba(31, 41, 55, 0.8) 100%) !important;
      border-color: rgba(99, 102, 241, 0.3) !important;
      color: #F3F4F6 !important;
      backdrop-filter: blur(10px);
    }

    [data-theme="dark"] main input::placeholder,
    [data-theme="dark"] main textarea::placeholder {
      color: #9CA3AF !important;
    }

    [data-theme="dark"] main input:focus,
    [data-theme="dark"] main select:focus,
    [data-theme="dark"] main textarea:focus {
      border-color: #6366F1 !important;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3) !important;
      background: linear-gradient(135deg, rgba(75, 85, 99, 0.9) 0%, rgba(55, 65, 81, 0.9) 100%) !important;
    }

    /* Modals en mode sombre */
    [data-theme="dark"] .fixed.bg-black.bg-opacity-50 {
      background: linear-gradient(135deg, rgba(79, 70, 229, 0.3) 0%, rgba(0, 0, 0, 0.8) 100%) !important;
      backdrop-filter: blur(5px);
    }

    [data-theme="dark"] .fixed .bg-white {
      background: linear-gradient(135deg, rgba(31, 41, 55, 0.98) 0%, rgba(17, 24, 39, 0.98) 100%) !important;
      border: 1px solid rgba(99, 102, 241, 0.3) !important;
      box-shadow: 0 20px 60px rgba(79, 70, 229, 0.4) !important;
      backdrop-filter: blur(20px);
    }

    /* Badges et statuts plus contrastÃ©s avec effet glow */
    [data-theme="dark"] main .bg-green-100 {
      background: linear-gradient(135deg, rgba(6, 95, 70, 0.8) 0%, rgba(4, 120, 87, 0.8) 100%) !important;
      color: #A7F3D0 !important;
      box-shadow: 0 0 20px rgba(16, 185, 129, 0.3);
    }

    [data-theme="dark"] main .bg-blue-100 {
      background: linear-gradient(135deg, rgba(30, 58, 138, 0.8) 0%, rgba(37, 99, 235, 0.8) 100%) !important;
      color: #BFDBFE !important;
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
    }

    [data-theme="dark"] main .bg-purple-100 {
      background: linear-gradient(135deg, rgba(88, 28, 135, 0.8) 0%, rgba(124, 58, 237, 0.8) 100%) !important;
      color: #DDD6FE !important;
      box-shadow: 0 0 20px rgba(168, 85, 247, 0.3);
    }

    [data-theme="dark"] main .bg-yellow-100 {
      background: linear-gradient(135deg, rgba(146, 64, 14, 0.8) 0%, rgba(217, 119, 6, 0.8) 100%) !important;
      color: #FED7AA !important;
      box-shadow: 0 0 20px rgba(251, 146, 60, 0.3);
    }

    [data-theme="dark"] main .bg-red-100 {
      background: linear-gradient(135deg, rgba(127, 29, 29, 0.8) 0%, rgba(220, 38, 38, 0.8) 100%) !important;
      color: #FECACA !important;
      box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
    }

    /* Stats cards plus lisibles avec effet glow */
    [data-theme="dark"] main .text-blue-600 {Â 
      color: #60A5FA !important;Â 
      text-shadow: 0 0 10px rgba(96, 165, 250, 0.5);
    }
    [data-theme="dark"] main .text-green-600 {Â 
      color: #34D399 !important;Â 
      text-shadow: 0 0 10px rgba(52, 211, 153, 0.5);
    }
    [data-theme="dark"] main .text-purple-600 {Â 
      color: #A78BFA !important;Â 
      text-shadow: 0 0 10px rgba(167, 139, 250, 0.5);
    }
    [data-theme="dark"] main .text-orange-600 {Â 
      color: #FB923C !important;Â 
      text-shadow: 0 0 10px rgba(251, 146, 60, 0.5);
    }
    [data-theme="dark"] main .text-red-600 {Â 
      color: #F87171 !important;Â 
      text-shadow: 0 0 10px rgba(248, 113, 113, 0.5);
    }

    /* Toggle theme button avec effet PREMIUM */
    [data-theme="dark"] .theme-toggle {
      background: linear-gradient(135deg, #6366F1, #EC4899) !important;
      border: 2px solid rgba(255, 255, 255, 0.2) !important;
      box-shadow: 0 8px 32px rgba(236, 72, 153, 0.5), 0 0 60px rgba(99, 102, 241, 0.3) !important;
      color: #FFFFFF;
    }

    [data-theme="dark"] .theme-toggle:hover {
      transform: translateY(-4px) scale(1.05) !important;
      box-shadow: 0 12px 48px rgba(236, 72, 153, 0.6), 0 0 80px rgba(99, 102, 241, 0.5) !important;
    }

    /* Sidebar amÃ©lioration des liens */
    [data-theme="dark"] aside .nav-link {
      color: #E0E7FF !important;
      transition: all 0.3s ease !important;
      position: relative;
      overflow: hidden;
    }

    [data-theme="dark"] aside .nav-link::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      transition: left 0.5s;
    }

    [data-theme="dark"] aside .nav-link:hover::before {
      left: 100%;
    }

    [data-theme="dark"] aside .nav-link:hover {
      background: rgba(255, 255, 255, 0.15) !important;
      color: #FFFFFF !important;
      transform: translateX(8px) !important;
      box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
    }

    /* User profile dans la sidebar avec glassmorphism */
    [data-theme="dark"] aside .user-profile {
      background: rgba(255, 255, 255, 0.1) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    }

    /* Flash messages amÃ©liorÃ©s */
    [data-theme="dark"] .bg-gradient-to-r.from-maihlili-100.to-maihlili-50 {
      background: linear-gradient(to right, rgba(99, 102, 241, 0.3), rgba(168, 85, 247, 0.2)) !important;
      border: 1px solid rgba(99, 102, 241, 0.4) !important;
      color: #E0E7FF !important;
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(99, 102, 241, 0.3);
    }

    /* Scrollbars pour le mode sombre avec gradient */
    [data-theme="dark"] ::-webkit-scrollbar-track {Â 
      background: rgba(31, 41, 55, 0.5) !important;Â 
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb {Â 
      background: linear-gradient(180deg, #6366F1 0%, #EC4899 100%) !important;
      border-radius: 10px;
    }

    [data-theme="dark"] ::-webkit-scrollbar-thumb:hover {Â 
      background: linear-gradient(180deg, #7C3AED 0%, #F472B6 100%) !important;
      box-shadow: 0 0 10px rgba(236, 72, 153, 0.5);
    }

    /* Animation de particules (optionnel - effet premium) */
    [data-theme="dark"] body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background:Â 
        radial-gradient(circle at 20% 50%, rgba(99, 102, 241, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 80%, rgba(236, 72, 153, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 40% 20%, rgba(124, 58, 237, 0.1) 0%, transparent 50%);
      pointer-events: none;
      z-index: 0;
    }

    [data-theme="dark"] aside,
    [data-theme="dark"] main {
      position: relative;
      z-index: 1;
    }

    /* Boutons hover amÃ©liorÃ©s avec effet glow */
    [data-theme="dark"] main .hover\:bg-blue-50:hover {Â 
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.25) 0%, rgba(79, 70, 229, 0.25) 100%) !important;
      box-shadow: 0 0 15px rgba(99, 102, 241, 0.4);
    }

    [data-theme="dark"] main .hover\:bg-green-50:hover {Â 
      background: linear-gradient(135deg, rgba(52, 211, 153, 0.25) 0%, rgba(16, 185, 129, 0.25) 100%) !important;
      box-shadow: 0 0 15px rgba(52, 211, 153, 0.4);
    }

    [data-theme="dark"] main .hover\:bg-red-50:hover {Â 
      background: linear-gradient(135deg, rgba(248, 113, 113, 0.25) 0%, rgba(239, 68, 68, 0.25) 100%) !important;
      box-shadow: 0 0 15px rgba(239, 68, 68, 0.4);
    }

    [data-theme="dark"] main .hover\:bg-gray-200:hover {Â 
      background: linear-gradient(135deg, rgba(156, 163, 175, 0.3) 0%, rgba(107, 114, 128, 0.3) 100%) !important;
    }
  </style>
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />
</head>
<body class="min-h-screen">
  
  <div class="flex h-full">
    <aside class="w-64 min-h-screen p-4 border-r border-gray-200 flex-shrink-0 transition-all duration-500 ease-in-out">
      
      <div class="flex items-center mb-6 px-1">
        <span class="text-2xl font-extrabold text-maihlili-500">
            Maihlili Paie
        </span>
      </div>
      
      <nav class="space-y-2">
        {% if current_user.is_authenticated %}
          {% if current_user.is_manager %}
            <a href="{{ url_for('index') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
              <span>Tableau de bord</span>
            </a>
            <a href="{{ url_for('planning') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
              <span>Planning</span>
            </a>
            <a href="{{ url_for('show_employees') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
              <span>EmployÃ©s</span>
            </a>
            <a href="{{ url_for('manage_teams') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 19h2a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2h2m0 0h10m-10 0l-4-4m4 4l4-4m7 0l4-4m-4 4l-4-4m-5-4h10a2 2 0 012 2v10a2 2 0 01-2 2H7a2 2 0 01-2-2V9a2 2 0 012-2z"></path></svg>
                <span>Ã‰quipes</span>
            </a>
            <a href="{{ url_for('show_shifts') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <span>Services</span>
            </a>
          {% else %}
            <a href="{{ url_for('employee_dashboard') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
                <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path></svg>
                <span>Mon Tableau de bord</span>
            </a>
            <a href="{{ url_for('planning') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
              <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
              <span>Mon Planning</span>
            </a>
          {% endif %}
          
          <a href="{{ url_for('logout') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-red-100 hover:text-red-700">
            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3v-3m11-1V5a3 3 0 00-3-3H6a3 3 0 00-3 3v4"></path></svg>
            <span>DÃ©connexion</span>
          </a>
        {% else %}
          <a href="{{ url_for('login') }}" class="nav-link flex items-center p-3 rounded-lg text-gray-800 hover:bg-maihlili-50">
            <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3v-3"></path></svg>
            <span>Connexion</span>
          </a>
        {% endif %}
      </nav>
      
      {% if current_user.is_authenticated and current_user.employee %}
      <div class="user-profile card mt-6 p-4 rounded-xl">
        <div class="flex items-center">
          <div class="flex-shrink-0 h-10 w-10 bg-maihlili-500 rounded-full flex items-center justify-center text-white font-semibold mr-3">
            {{ current_user.employee.full_name[0]|upper }}
          </div>
          <div class="text-sm">
            <p class="font-medium text-gray-800 leading-none">
                {{ current_user.employee.full_name }}
            </p>
            <p class="text-gray-500 leading-tight">
                {{ current_user.employee.position or ('Manager' if current_user.is_manager else 'EmployÃ©') }}
            </p>
          </div>
        </div>
      </div>
      {% endif %}
      
    </aside>

    <main class="flex-1 p-8 transition-all duration-500 ease-in-out overflow-y-auto">
      
      <div class="mb-6 space-y-3">
        {% with messages = get_flashed_messages(with_categories=true) %}
          {% if messages %}
            {% for category, message in messages %}
              <div class="bg-gradient-to-r from-maihlili-100 to-maihlili-50 border-l-4 border-maihlili-500 p-4 rounded-lg shadow-sm text-sm" role="alert">
                <p class="font-medium text-maihlili-800">{{ message }}</p>
              </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
      </div>
      
      {% block content %}
      {% endblock %}
    </main>
    
    <button class="theme-toggle fixed bottom-6 right-6 p-4 rounded-full text-2xl cursor-pointer shadow-lg z-50 transition-all duration-300 ease-in-out" id="themeToggle">
      ðŸŒ™
    </button>
  </div>

  <script>
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;
    
    // RÃ©cupÃ©rer le thÃ¨me sauvegardÃ©
    const savedTheme = localStorage.getItem('maihlili-theme') || 'light';
    body.setAttribute('data-theme', savedTheme);
    updateThemeToggle(savedTheme);
    
    function toggleTheme() {
      const currentTheme = body.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      
      body.setAttribute('data-theme', newTheme);
      localStorage.setItem('maihlili-theme', newTheme);
      updateThemeToggle(newTheme);
    }
    
    function updateThemeToggle(theme) {
      if (theme === 'light') {
        themeToggle.textContent = 'ðŸŒ™';
        themeToggle.title = 'Passer en mode sombre';
      } else {
        themeToggle.textContent = 'â˜€ï¸';
        themeToggle.title = 'Passer en mode clair';
      }
    }

    themeToggle.addEventListener('click', toggleTheme);

    document.addEventListener('DOMContentLoaded', function() {
      const currentPath = window.location.pathname;
      const navLinks = document.querySelectorAll('.nav-link');
      
      navLinks.forEach(link => {
        if (link.getAttribute('href') === currentPath) {
          link.classList.add('bg-maihlili-100', 'text-maihlili-700', 'font-semibold');
          link.classList.remove('text-gray-800', 'hover:bg-maihlili-50');
        }
      });
    });
  </script>
</body>
</html>
